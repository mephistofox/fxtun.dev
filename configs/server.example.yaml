# fxTunnel Server Configuration

server:
  # Port for control plane connections (clients connect here)
  control_port: 4443

  # Port for HTTP traffic (nginx proxies here)
  http_port: 10080

  # TCP tunnel port range
  tcp_port_range:
    min: 11000
    max: 12000

  # UDP tunnel port range
  udp_port_range:
    min: 20001
    max: 30000

# Domain settings for HTTP tunnels
domain:
  # Base domain - tunnels will be accessible at *.base
  base: "tunnel.example.com"

  # Enable wildcard subdomain support
  wildcard: true

# Authentication settings
auth:
  # Enable authentication (recommended for production)
  enabled: true

  # Legacy YAML tokens (optional, for backwards compatibility)
  # New tokens should be created via web panel
  tokens:
    # Admin token - can use any subdomain
    - name: "admin"
      token: "sk_admin_supersecrettoken123"
      allowed_subdomains: ["*"]
      max_tunnels: 100

  # JWT secret for web panel authentication
  # Auto-generated if empty (will change on restart!)
  jwt_secret: ""

  # Access token lifetime
  access_token_ttl: "15m"

  # Refresh token lifetime
  refresh_token_ttl: "168h"  # 7 days

  # Require invite code for registration
  invite_only: true

  # Maximum reserved domains per user
  max_domains_per_user: 3

# TLS settings (optional - use nginx for TLS termination instead)
tls:
  enabled: false
  # cert_file: "/etc/letsencrypt/live/tunnel.example.com/fullchain.pem"
  # key_file: "/etc/letsencrypt/live/tunnel.example.com/privkey.pem"

# Logging settings
logging:
  # Log level: debug, info, warn, error
  level: "info"

  # Log format: console (human readable) or json
  format: "console"

# Web panel settings
web:
  # Enable web panel
  enabled: true

  # Port for web panel API (should be in allowed range or proxied via nginx)
  port: 10081

# Database settings
database:
  # SQLite database path
  path: "./data/fxtunnel.db"

# TOTP 2FA settings
totp:
  # Enable TOTP support
  enabled: true

  # Issuer name shown in authenticator apps
  issuer: "fxTunnel"

  # Encryption key for TOTP secrets (32 bytes hex)
  # Auto-generated if empty (TOTP secrets will be lost on restart!)
  encryption_key: ""

# Client downloads settings
downloads:
  # Enable client downloads via web panel
  enabled: true

  # Path to client binaries directory
  path: "./downloads"
